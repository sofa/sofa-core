/**
 * sofa-core - v0.14.2 - Thu Mar 26 2015 18:52:40 GMT+0100 (CET)
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO)
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(t,e){"use strict";function n(t){if(null===t||r(t))return!1;var e=t.length;return 1===t.nodeType&&e?!0:o.Util.isString(t)||o.Util.isArray(t)||0===e||"number"==typeof e&&e>0&&e-1 in t}function r(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}var i=window.cc={},o=window.sofa=i;o.namespace=function(t){var e,n=t.split("."),r=o;("cc"===n[0]||"sofa"===n[0])&&(n=n.slice(1));var i,u=o;for(e=0;e<n.length;e++)"undefined"==typeof r[n[e]]&&(r[n[e]]={}),e===n.length-2&&(u=r[n[e]]),i=n[e],r=r[n[e]];return{targetParent:u,targetName:i,bind:function(t){u[i]=t}}},o.define=function(t,e){o.namespace(t).bind(e)},o.define("sofa.ConfigService",function(){var t={};return o.Config=o.Config||{},t.getSupportedCountries=function(){return o.Config.countries?o.Config.countries:[]},t.getDefaultCountry=function(){var e=t.getSupportedCountries();return 0===e.length?null:e[0]},t.getLocalizedPayPalButtonClass=function(e){return e?"cc-paypal-button--"+t.get("locale")+"--disabled":"cc-paypal-button--"+t.get("locale")},t.get=function(t,e){var n=o.Config[t];return o.Util.isUndefined(n)&&!o.Util.isUndefined(e)?e:n},t.set=function(t,e){if(!o.Config)throw new Error("sofa.Config not available");o.Config[t]=e},t}),o.define("sofa.LocationService",function(){return{path:function(){return window.location.href}}}),o.define("sofa.models.BasketItem",function(){var t=this;return t.quantity=0,t}),o.models.BasketItem.prototype.hasSpecialPrice=function(){var t=this.variant&&this.variant.price.normal||this.product.price.normal,e=this.variant&&this.variant.price.special||this.product.price.special;return t>e},o.models.BasketItem.prototype.getPrice=function(){return this.variant&&o.Util.isNumeric(this.variant.price.normal)?this.variant.price.normal:this.product.price.normal},o.models.BasketItem.prototype.getSpecialPrice=function(){return this.variant&&o.Util.isNumeric(this.variant.price.special)?this.variant.price.special:this.product.price.special},o.models.BasketItem.prototype.getTotal=function(){var t=(this.hasSpecialPrice()?this.getSpecialPrice:this.getPrice).bind(this);return o.Util.round(this.quantity*t(),2)},o.models.BasketItem.prototype.getVariantID=function(){return this.variant?this.variant.variantID:null},o.models.BasketItem.prototype.getOptionID=function(){return this.variant?this.variant.optionID:null},o.define("sofa.models.Category",function(t){this._config=t}),o.models.Category.prototype.getOriginFullUrl=function(){return this.getUrl()},o.models.Category.prototype.getUrl=function(){return this.route},o.models.Category.prototype.hasChildren=function(){return this.children&&this.children.length},o.define("sofa.models.Product",function(t){this._config=t}),o.models.Product.prototype.getOriginFullUrl=function(){return this.getUrl()},o.models.Product.prototype.getUrl=function(t){var e=this.routes[0];return t&&(e=o.Util.find(this.routes,function(e){return e.categoryUrl===t})),e.productUrl},o.models.Product.prototype.getImage=function(t){for(var e=0;e<this.images.length;e++)return this.images[e].sizeName&&this.images[e].sizeName.toLowerCase()===t?this.images[e].url:this.images[e].url;return this._config.mediaPlaceholder},o.models.Product.prototype.getMainImage=function(){for(var t,e=0;e<this.images.length;e++)if(this.images[e].main){t=this.images[e].url;break}return t||this.getImage()},o.models.Product.prototype.getAllImages=function(){return this.images},o.models.Product.prototype.hasMultipleImages=function(){return this.getAllImages().length>0},o.models.Product.prototype.hasBasePrice=function(){return this.custom1>0},o.models.Product.prototype.getBasePriceStr=function(t){var e=this.custom1;return t&&t.unitAmount&&(e=1/t.unitAmount*parseFloat(t.price)),o.Util.toFixed(e,2)},o.models.Product.prototype.hasUnit=function(){return o.Util.isString(this.custom3)&&this.custom3.length>0},o.models.Product.prototype.getUnit=function(){return this.custom3},o.models.Product.prototype.hasOldPrice=function(){return o.Util.isNumeric(this.priceOld)&&this.priceOld>0},o.models.Product.prototype.hasVariants=function(){return!!(this.variants&&this.variants.length>0)},o.models.Product.prototype.hasInfiniteStock=function(){return this.qty===e||null===this.qty},o.models.Product.prototype.isOutOfStock=function(){return this.hasInfiniteStock()?!1:!this.hasVariants()&&this.qty<=0||this.areAllVariantsOutOfStock()},o.models.Product.prototype.areAllVariantsOutOfStock=function(){return this.hasVariants()?o.Util.every(this.variants,function(t){return t.stock<=0}):!1},o.models.Product.prototype.hasAttributes=function(){return this.attributes&&Object.keys(this.attributes).length>0},o.models.Product.prototype.getPrice=function(){return this.price.normal},o.models.Product.prototype.getSpecialPrice=function(){return this.price.special},o.models.Product.prototype.getVat=function(){return this.taxPercent},o.define("sofa.Observable",function(){var t={mixin:function(t,e){return e={},t.on=function(n,r){return(e[n]=e[n]||[]).push(r),t},t.once=function(e,n){function r(){n.apply(t.off(e,r),arguments)}return r.h=n,t.on(e,r)},t.off=function(n,r){for(var i=e[n],o=0;r&&i&&i[o];o++)i[o]!==r&&i[o].h!==r||i.splice(o--,1);return o||delete e[n],t},t.emit=function(n){for(var r=e[n],i=0;r&&r[i];)r[i++].apply(t,r.slice.call(arguments,1));return t},t}};return t}),o.observable=new o.Observable,o.Util={isToFixedBroken:"1"!==.9.toFixed(),indicatorObject:{},objectTypes:{"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},domReady:function(e){"complete"===t.readyState?e():window.addEventListener("load",e,!1)},round:function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n},toFixed:function(t,e){if(t=o.Util.isString(t)?parseFloat(t):t,o.Util.isToFixedBroken){e=e||0;var n=Math.pow(10,e);return(Math.round(t*n)/n).toFixed(e)}return t.toFixed(e)},clone:function(t){if(null===t||"object"!=typeof t)return t;var e;if(t instanceof Date)return e=new Date,e.setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var n=0,r=t.length;r>n;n++)e[n]=this.clone(t[n]);return e}if(t instanceof Object){e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=this.clone(t[i]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")},extend:function(t){for(var e=0;e<arguments.length;e++){var n=arguments[e];if(n!==t)for(var r in n)t[r]=n[r]}return t},createCallback:function(t,e,n){var r=typeof t;if("function"!==r){if("object"!==r)return function(e){return e[t]};var i=keys(t);return function(e){for(var n=i.length,r=!1;n--&&(r=isEqual(e[i[n]],t[i[n]],o.Util.indicatorObject)););return r}}return"undefined"==typeof e?t:1===n?function(n){return t.call(e,n)}:2===n?function(n,r){return t.call(e,n,r)}:4===n?function(n,r,i,o){return t.call(e,n,r,i,o)}:function(n,r,i){return t.call(e,n,r,i)}},findKey:function(t,e,n){var r;return e=o.Util.createCallback(e,n),o.Util.forOwn(t,function(t,n,i){return e(t,n,i)?(r=n,!1):void 0}),r},find:function(t,e,n){var r;return e=o.Util.createCallback(e,n),o.Util.forOwn(t,function(t,n,i){return e(t,n,i)?(r=t,!1):void 0}),r},every:function(t,e,n){var r=!0;return e=o.Util.createCallback(e,n),o.Util.forOwn(t,function(t,n,i){return e(t,n,i)?void 0:(r=!1,!1)}),r},forOwn:function(t,e){var n,r=t,i=r;if(!r)return i;if(!o.Util.objectTypes[typeof r])return i;for(n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&e(r[n],n,t)===!1)return i;return i},debounce:function(t,e,n){var r,i;return function(){var o=this,u=arguments,a=function(){r=null,n||(i=t.apply(o,u))},c=n&&!r;return clearTimeout(r),r=setTimeout(a,e),c&&(i=t.apply(o,u)),i}},isObject:function(t){return"object"==typeof t},isNumber:function(t){return"number"==typeof t},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isArray:function(t){return t instanceof Array},isFunction:function(t){return"function"==typeof t},isString:function(t){return"string"==typeof t},isUndefined:function(t){return"undefined"==typeof t},isNotNullNorUndefined:function(t){return!o.Util.isUndefined(t)&&null!==t},isEmptyObject:function(t){for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0},isEmpty:function(t){return this.isArray(t)?!t.length:this.isObject(t)?this.isEmptyObject(t):!0},createGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Array:{remove:function(t,e){var n=t.indexOf(e);return t.splice(n,1),t}},toJson:function(t){if(!t||!t.length||t.length<2)return null;var e=t.substring(1,t.length-1);return JSON.parse(e)},toFormData:function(t){var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")},forEach:function(t,e,r){var i;if(t)if(o.Util.isFunction(t))for(i in t)t.hasOwnProperty(i)&&e.call(r,t[i],i);else if(t.forEach&&t.forEach!==o.Util.forEach)t.forEach(e,r);else if(n(t))for(i=0;i<t.length;i++)e.call(r,t[i],i);else for(i in t)t.hasOwnProperty(i)&&e.call(r,t[i],i);return t}},o.define("sofa.util.TreeIterator",function(t,e){var n=this,r=!0;n.iterateChildren=function(e){return r=!0,i(t,e)};var i=function(t,n,o){r=n(t,o),t[e]&&r!==!1&&t[e].forEach(function(e){r!==!1&&i(e,n,t)})}})}(document);